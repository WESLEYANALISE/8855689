@tailwind base;

/* ===========================================
   PERFORMANCE-OPTIMIZED ANIMATIONS
   GPU-accelerated, lightweight CSS animations
   =========================================== */

/* Core fade animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

/* Slide animations - GPU accelerated with translateZ(0) */
@keyframes slideUp {
  from { opacity: 0; transform: translateY(8px) translateZ(0); }
  to { opacity: 1; transform: translateY(0) translateZ(0); }
}

@keyframes slideDown {
  from { opacity: 0; transform: translateY(-8px) translateZ(0); }
  to { opacity: 1; transform: translateY(0) translateZ(0); }
}

@keyframes slideLeft {
  from { opacity: 0; transform: translateX(16px) translateZ(0); }
  to { opacity: 1; transform: translateX(0) translateZ(0); }
}

@keyframes slideRight {
  from { opacity: 0; transform: translateX(-16px) translateZ(0); }
  to { opacity: 1; transform: translateX(0) translateZ(0); }
}

/* Scale animations */
@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.95) translateZ(0); }
  to { opacity: 1; transform: scale(1) translateZ(0); }
}

@keyframes scaleOut {
  from { opacity: 1; transform: scale(1) translateZ(0); }
  to { opacity: 0; transform: scale(0.95) translateZ(0); }
}

/* Combined fade + slide */
@keyframes fadeSlideUp {
  from { opacity: 0; transform: translateY(12px) translateZ(0); }
  to { opacity: 1; transform: translateY(0) translateZ(0); }
}

@keyframes fadeSlideDown {
  from { opacity: 0; transform: translateY(-12px) translateZ(0); }
  to { opacity: 1; transform: translateY(0) translateZ(0); }
}

/* Existing animations */
@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(200%); }
}

@keyframes icon-shimmer {
  0%, 100% { color: rgb(163 163 163); }
  50% { color: rgb(250 250 250); }
}

@keyframes wave-pulse {
  0%, 100% { transform: translateY(0) scale(1); opacity: 0.5; }
  50% { transform: translateY(-3px) scale(1.02); opacity: 0.8; }
}

@keyframes wave-shimmer {
  0% { background-position: 200% 0; opacity: 0.3; }
  50% { opacity: 0.7; }
  100% { background-position: -200% 0; opacity: 0.3; }
}

@keyframes grow-width {
  0% { width: 0%; }
  100% { width: 100%; }
}

/* Utility classes for animations */
.animate-icon-shimmer { animation: icon-shimmer 2s linear infinite; }
.animate-wave-pulse { animation: wave-pulse 3s ease-in-out infinite; }
.animate-wave-shimmer {
  background: linear-gradient(90deg, 
    rgba(239, 68, 68, 0.1) 0%, 
    rgba(239, 68, 68, 0.4) 25%, 
    rgba(255, 255, 255, 0.3) 50%, 
    rgba(239, 68, 68, 0.4) 75%, 
    rgba(239, 68, 68, 0.1) 100%
  );
  background-size: 200% 100%;
  animation: wave-shimmer 3s linear infinite;
}

/* 3D Transform utilities for card flips */
.preserve-3d { transform-style: preserve-3d; }
.backface-hidden { backface-visibility: hidden; }
.rotate-y-180 { transform: rotateY(180deg); }
.perspective-1000 { perspective: 1000px; }

/* CSS containment for performance isolation */
.contain-layout { contain: layout; }
.contain-paint { contain: paint; }
.contain-strict { contain: strict; }

/* Prefers reduced motion - respect user preferences */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    /* Modern Vade Mecum Elite palette - cinza escuro profundo */
    --background: 0 0% 8%;
    --foreground: 0 0% 98%;

    --card: 0 0% 12%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 12%;
    --popover-foreground: 0 0% 98%;

    --primary: 0 85% 50%;
    --primary-foreground: 0 0% 100%;

    --secondary: 0 0% 15%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 15%;
    --muted-foreground: 0 0% 60%;

    --accent: 0 70% 55%;
    --accent-foreground: 0 0% 100%;
    
    --accent-light: 0 75% 62%;
    --accent-hover: 0 65% 50%;
    --strong-color: 45 88% 72%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 18%;
    --input: 0 0% 15%;
    --ring: 0 70% 60%;

    --radius: 1rem;

    --warning: 45 93% 58%;
    --warning-foreground: 0 0% 0%;

    /* Vade Mecum specific colors */
    --constitution: 0 70% 60%;
    --codes: 217 91% 60%;
    --statutes: 239 84% 67%;
    --summaries: 174 72% 56%;
    
    /* Academic environment gradients */
    --gradient-purple-start: 240 55% 45%;
    --gradient-purple-end: 250 60% 40%;
    --gradient-red-start: 355 50% 40%;
    --gradient-red-end: 345 55% 35%;
    --gradient-green-start: 160 50% 35%;
    --gradient-green-end: 150 55% 30%;
    --gradient-pink-start: 290 50% 45%;
    --gradient-pink-end: 280 55% 40%;

    --article-highlight: 0 70% 65%;
    
    /* Audio progress colors */
    --audio-progress: 0 75% 62%;
    --audio-wave: 0 75% 60%;

    /* Assistant specific colors */
    --assistant-study: 210 90% 55%;
    --assistant-realcase: 160 70% 45%;
    --assistant-psychologist: 280 75% 60%;
    --assistant-tcc: 30 95% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  /* Anti-flash: garantir background escuro em todo o app */
  html, body, #root {
    background-color: hsl(0, 0%, 8%) !important;
  }

  html {
    overflow-x: hidden;
  }

  body {
    @apply bg-background text-foreground;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
    width: 100%;
  }
  
  #root {
    min-height: 100vh;
    overflow-x: hidden;
  }
  
  /* Anti-flash: garantir que AnimatePresence não mostre background branco */
  [data-motion-pop-id],
  .framer-motion-container {
    background-color: inherit;
  }
  
  /* Anti-flash: forçar background em elementos com opacity animada */
  .motion-opacity-container {
    background-color: hsl(0, 0%, 8%);
  }

  /* Markdown styles for chat */
  .prose {
    @apply text-foreground;
  }
  
  .prose p {
    @apply text-foreground leading-relaxed;
  }
  
  .prose strong {
    @apply font-bold;
    color: hsl(var(--strong-color)) !important;
  }
  
  strong {
    @apply font-bold;
    color: hsl(var(--strong-color)) !important;
  }
  
  .resumo-content h1,
  .resumo-content h2,
  .resumo-content h3 {
    color: hsl(var(--accent-light)) !important;
  }

  .resumo-content strong {
    color: hsl(var(--strong-color)) !important;
  }
  
  /* Article specific styles */
  .article-content {
    font-family: 'Source Serif 4', Georgia, serif;
  }
  
  .article-content strong {
    @apply text-accent font-bold;
  }
  
  .article-content .uppercase-highlight {
    @apply text-accent font-bold;
  }
  
  /* Neutralize font-size classes within article content to allow parent control */
  .article-content .text-sm,
  .article-content .text-base {
    font-size: inherit !important;
  }
  
  .prose code {
    @apply bg-secondary/50 px-1.5 py-0.5 rounded text-sm;
  }
  
  .prose pre {
    @apply bg-secondary/50 rounded-lg p-3 overflow-x-auto;
  }
  
  .prose ul, .prose ol {
    @apply my-2 pl-5;
  }
  
  .prose li {
    @apply my-1;
  }
  
  .prose a {
    @apply text-accent hover:underline;
  }
  
  .prose h1 {
    @apply text-foreground font-bold text-3xl;
  }
  
  .prose h2 {
    @apply text-foreground font-bold text-2xl;
  }
  
  .prose h3 {
    @apply text-foreground font-bold text-xl;
  }
  
  .prose h4, .prose h5, .prose h6 {
    @apply text-foreground font-bold text-lg;
  }

  /* Ocultar scrollbars mantendo funcionalidade de rolagem */
  ::-webkit-scrollbar {
    width: 0px;
    height: 0px;
  }

  html, body {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE e Edge */
    overflow: auto;
  }

  body::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
}

/* Animation definitions */

/* Animação staggered para listas - Performance otimizada */
.stagger-item {
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.3s ease-out, transform 0.3s ease-out;
  will-change: transform, opacity;
}

.stagger-item.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Animação de botões do menu de ações - Delays reduzidos */
.action-button {
  opacity: 0;
  transform: translateY(10px);
  animation: fade-in-up 0.2s ease-out forwards;
}

.action-button:nth-child(1) { animation-delay: 0.03s; }
.action-button:nth-child(2) { animation-delay: 0.06s; }
.action-button:nth-child(3) { animation-delay: 0.09s; }
.action-button:nth-child(4) { animation-delay: 0.12s; }
.action-button:nth-child(5) { animation-delay: 0.15s; }
.action-button:nth-child(6) { animation-delay: 0.18s; }

/* Performance: Remove animações após primeiros 20 elementos */
.article-card:nth-child(n+21) {
  opacity: 1 !important;
  transform: none !important;
  animation: none !important;
}

/* GPU acceleration para elementos animados */
.article-card {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* GPU acceleration para timeline cards - Performance otimizada */
.timeline-card-gpu {
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
  contain: layout style paint;
}

/* Otimização de blur para melhor performance */
.optimized-blur {
  will-change: backdrop-filter;
  transform: translateZ(0);
}

/* Container de scroll otimizado */
.scroll-optimized {
  contain: content;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

/* SVG animations GPU layer */
.svg-gpu-layer {
  will-change: transform;
  transform: translateZ(0);
}

/* Embla Carousel - GPU Acceleration para scroll fluido */
.embla-container {
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-overflow-scrolling: touch;
}

.embla-slide {
  contain: layout style paint;
  will-change: transform;
  transform: translateZ(0);
}

/* Animação fade-in-up para recursos */
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Animações para Simulação de Audiência */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

@keyframes float-up {
  0% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(-30px);
  }
}

@keyframes slide-in {
  0% {
    transform: translateX(-20px);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slide-in-right {
  0% {
    transform: translateX(100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slide-out-right {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  100% {
    transform: translateX(100%);
    opacity: 0;
  }
}

.animate-slide-in {
  animation: slide-in 0.3s ease-out forwards;
}

/* Markdown styling para resumos com melhor espaçamento */
.resumo-markdown {
  line-height: 1.75;
}

.resumo-markdown h1,
.resumo-markdown h2,
.resumo-markdown h3,
.resumo-markdown h4 {
  margin-top: 2rem;
  margin-bottom: 1rem;
  line-height: 1.4;
  color: hsl(45, 95%, 60%);
  font-weight: 700;
}

.resumo-markdown h1 {
  font-size: 1.25rem;
  font-weight: 700;
}

.resumo-markdown h2 {
  font-size: 1.125rem;
  font-weight: 600;
}

.resumo-markdown h3 {
  font-size: 1rem;
  font-weight: 600;
}

.resumo-markdown p {
  margin-top: 1.25rem;
  margin-bottom: 1.25rem;
  font-size: 0.9375rem;
}

.resumo-markdown ul,
.resumo-markdown ol {
  margin-top: 1rem;
  margin-bottom: 1rem;
  padding-left: 1.5rem;
  font-size: 0.9375rem;
}

.resumo-markdown li {
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

.resumo-markdown blockquote {
  margin-top: 1.25rem;
  margin-bottom: 1.25rem;
  padding-left: 1rem;
  border-left: 4px solid hsl(var(--primary));
  font-style: italic;
}

.resumo-markdown code {
  background: hsl(var(--muted));
  padding: 0.2rem 0.4rem;
  border-radius: 0.25rem;
  font-size: 0.8125rem;
}

.resumo-markdown pre {
  background: hsl(var(--muted));
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  margin-top: 1.25rem;
  margin-bottom: 1.25rem;
}

.resumo-markdown table {
  width: 100%;
  margin-top: 1.25rem;
  margin-bottom: 1.25rem;
  border-collapse: collapse;
}

.resumo-markdown th,
.resumo-markdown td {
  border: 1px solid hsl(var(--border));
  padding: 0.5rem;
  text-align: left;
  font-size: 0.875rem;
}

.resumo-markdown th {
  background: hsl(var(--muted));
  font-weight: 600;
}

.resumo-markdown strong {
  font-weight: 600;
  color: hsl(var(--foreground));
}

.resumo-markdown em {
  font-style: italic;
  color: hsl(var(--muted-foreground));
}

.resumo-markdown hr {
  display: none !important;
}

/* Font size levels for resumo content */
.resumo-font-size--2 .resumo-markdown p,
.resumo-font-size--2 .resumo-markdown li { font-size: 0.8125rem; }
.resumo-font-size--2 .resumo-markdown h1 { font-size: 1rem; }
.resumo-font-size--2 .resumo-markdown h2 { font-size: 0.9375rem; }
.resumo-font-size--2 .resumo-markdown h3 { font-size: 0.875rem; }

.resumo-font-size--1 .resumo-markdown p,
.resumo-font-size--1 .resumo-markdown li { font-size: 0.875rem; }
.resumo-font-size--1 .resumo-markdown h1 { font-size: 1.125rem; }
.resumo-font-size--1 .resumo-markdown h2 { font-size: 1rem; }
.resumo-font-size--1 .resumo-markdown h3 { font-size: 0.9375rem; }

.resumo-font-size-0 .resumo-markdown p,
.resumo-font-size-0 .resumo-markdown li { font-size: 0.9375rem; }
.resumo-font-size-0 .resumo-markdown h1 { font-size: 1.25rem; }
.resumo-font-size-0 .resumo-markdown h2 { font-size: 1.125rem; }
.resumo-font-size-0 .resumo-markdown h3 { font-size: 1rem; }

.resumo-font-size-1 .resumo-markdown p,
.resumo-font-size-1 .resumo-markdown li { font-size: 1rem; }
.resumo-font-size-1 .resumo-markdown h1 { font-size: 1.375rem; }
.resumo-font-size-1 .resumo-markdown h2 { font-size: 1.25rem; }
.resumo-font-size-1 .resumo-markdown h3 { font-size: 1.125rem; }

.resumo-font-size-2 .resumo-markdown p,
.resumo-font-size-2 .resumo-markdown li { font-size: 1.0625rem; }
.resumo-font-size-2 .resumo-markdown h1 { font-size: 1.5rem; }
.resumo-font-size-2 .resumo-markdown h2 { font-size: 1.375rem; }
.resumo-font-size-2 .resumo-markdown h3 { font-size: 1.25rem; }

.resumo-font-size-3 .resumo-markdown p,
.resumo-font-size-3 .resumo-markdown li { font-size: 1.125rem; }
.resumo-font-size-3 .resumo-markdown h1 { font-size: 1.625rem; }
.resumo-font-size-3 .resumo-markdown h2 { font-size: 1.5rem; }
.resumo-font-size-3 .resumo-markdown h3 { font-size: 1.375rem; }

/* Aplicar mesmos níveis para resumo-content */
.resumo-font-size--2 .resumo-content p { font-size: 0.8125rem; }
.resumo-font-size--2 .resumo-content h1 { font-size: 1.375rem; }
.resumo-font-size--2 .resumo-content h2 { font-size: 1.125rem; }
.resumo-font-size--2 .resumo-content h3 { font-size: 1rem; }

.resumo-font-size--1 .resumo-content p { font-size: 0.875rem; }
.resumo-font-size--1 .resumo-content h1 { font-size: 1.5rem; }
.resumo-font-size--1 .resumo-content h2 { font-size: 1.25rem; }
.resumo-font-size--1 .resumo-content h3 { font-size: 1.0625rem; }

.resumo-font-size-0 .resumo-content p { font-size: 0.9375rem; }
.resumo-font-size-0 .resumo-content h1 { font-size: 1.625rem; }
.resumo-font-size-0 .resumo-content h2 { font-size: 1.375rem; }
.resumo-font-size-0 .resumo-content h3 { font-size: 1.125rem; }

.resumo-font-size-1 .resumo-content p { font-size: 1rem; }
.resumo-font-size-1 .resumo-content h1 { font-size: 1.75rem; }
.resumo-font-size-1 .resumo-content h2 { font-size: 1.5rem; }
.resumo-font-size-1 .resumo-content h3 { font-size: 1.25rem; }

.resumo-font-size-2 .resumo-content p { font-size: 1.0625rem; }
.resumo-font-size-2 .resumo-content h1 { font-size: 1.875rem; }
.resumo-font-size-2 .resumo-content h2 { font-size: 1.625rem; }
.resumo-font-size-2 .resumo-content h3 { font-size: 1.375rem; }

.resumo-font-size-3 .resumo-content p { font-size: 1.125rem; }
.resumo-font-size-3 .resumo-content h1 { font-size: 2rem; }
.resumo-font-size-3 .resumo-content h2 { font-size: 1.75rem; }
.resumo-font-size-3 .resumo-content h3 { font-size: 1.5rem; }

/* Estilos para conteúdo de resumos prontos */
.resumo-content h1 {
  color: hsl(45, 95%, 60%);
  font-weight: bold;
  font-size: 1.625rem; /* 26px - reduzido de 30px */
  margin-top: 2rem;
  margin-bottom: 1rem;
  line-height: 1.2;
}

.resumo-content h2 {
  color: hsl(45, 95%, 60%);
  font-weight: bold;
  font-size: 1.375rem; /* 22px - reduzido de 24px */
  margin-top: 1.5rem;
  margin-bottom: 0.875rem;
  line-height: 1.3;
}

.resumo-content h3 {
  color: hsl(45, 95%, 60%);
  font-weight: bold;
  font-size: 1.125rem; /* 18px - reduzido de 20px */
  margin-top: 1.25rem;
  margin-bottom: 0.75rem;
  line-height: 1.4;
}

.resumo-content blockquote {
  border-left: 4px solid hsl(45, 95%, 60%);
  padding-left: 1rem;
  margin: 1.5rem 0;
  font-style: italic;
  color: hsl(var(--muted-foreground));
  background: hsl(var(--muted) / 0.3);
  padding: 1rem;
  border-radius: 0.5rem;
}

.resumo-content strong {
  font-weight: 700;
  color: inherit;
}

.resumo-content h1 strong,
.resumo-content h2 strong,
.resumo-content h3 strong {
  color: hsl(45, 95%, 60%);
}

/* Forçar amarelo negrito nos termos chaves */
.resumo-content h3 strong {
  color: hsl(45, 95%, 60%) !important;
  font-weight: 700 !important;
}

.resumo-content table {
  display: none !important;
}

.resumo-content ul,
.resumo-content ol {
  list-style-type: disc;
  margin-left: 1.5rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

.resumo-content p {
  margin-bottom: 1rem;
  line-height: 1.75;
  font-size: 0.9375rem; /* 15px - reduzido de 16px */
}

.resumo-content hr {
  display: none !important;
}

/* Animação shake para feedback de erro */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
  20%, 40%, 60%, 80% { transform: translateX(5px); }
}

.animate-shake {
  animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
}

/* Animações de entrada para cards */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Utility classes for optimized interactions */
.btn-tactile {
  @apply transition-transform duration-150 active:scale-95;
}

.card-hover {
  @apply transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5;
}

.hover-lift {
  @apply transition-transform duration-200 hover:-translate-y-1;
}

/* GPU acceleration for animated elements */
.gpu-accelerated {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Safe area padding for devices with notches/bottom bars */
.safe-area-bottom {
  padding-bottom: max(1.5rem, env(safe-area-inset-bottom, 0px));
}

/* Text reveal animation for streaming text */
@keyframes text-reveal {
  from {
    opacity: 0;
    transform: translateY(4px);
    filter: blur(2px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

@keyframes gradient-reveal {
  from {
    mask-image: linear-gradient(to bottom, black 0%, transparent 20%);
    -webkit-mask-image: linear-gradient(to bottom, black 0%, transparent 20%);
  }
  to {
    mask-image: linear-gradient(to bottom, black 100%, black 100%);
    -webkit-mask-image: linear-gradient(to bottom, black 100%, black 100%);
  }
}

.text-reveal-animation {
  animation: text-reveal 0.4s ease-out forwards;
}

.prose-streaming > * {
  animation: text-reveal 0.3s ease-out forwards;
}

.prose-streaming > *:nth-child(1) { animation-delay: 0ms; }
.prose-streaming > *:nth-child(2) { animation-delay: 50ms; }
.prose-streaming > *:nth-child(3) { animation-delay: 100ms; }
.prose-streaming > *:nth-child(4) { animation-delay: 150ms; }
.prose-streaming > *:nth-child(5) { animation-delay: 200ms; }
.prose-streaming > *:nth-child(6) { animation-delay: 250ms; }
.prose-streaming > *:nth-child(7) { animation-delay: 300ms; }
.prose-streaming > *:nth-child(8) { animation-delay: 350ms; }
.prose-streaming > *:nth-child(9) { animation-delay: 400ms; }
.prose-streaming > *:nth-child(10) { animation-delay: 450ms; }

/* Carrossel contínuo lento */
@keyframes carousel-slow {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

.animate-carousel-slow {
  animation: carousel-slow 60s linear infinite;
}

/* ===============================================
   PERFORMANCE OPTIMIZATIONS - SCROLL FLUIDITY
   =============================================== */

/* Isolar seções para evitar repaint global */
.scroll-section {
  contain: layout style paint;
}

/* Content visibility para lazy rendering */
.lazy-section {
  content-visibility: auto;
  contain-intrinsic-size: 0 300px;
}

/* GPU acceleration para elementos que animam */
.gpu-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Desabilitar will-change para elementos estáticos */
.no-will-change {
  will-change: auto !important;
}

/* Scroll otimizado */
.optimized-scroll {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  scroll-behavior: auto;
}

/* Remover transições durante scroll */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Cards de carrossel otimizados */
.carousel-card {
  contain: layout style;
  will-change: auto;
}

.carousel-card:hover {
  will-change: transform;
}

/* Imagens otimizadas */
img {
  content-visibility: auto;
}

/* ===============================================
   UNIVERSAL IMAGE SYSTEM
   =============================================== */

/* Skeleton Shimmer Effect */
.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    hsl(var(--muted)) 0%,
    hsl(var(--muted) / 0.5) 50%,
    hsl(var(--muted)) 100%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

@keyframes skeleton-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* Skeleton Wave Effect */
.skeleton-wave {
  background: linear-gradient(
    90deg,
    hsl(var(--muted)) 0%,
    hsl(var(--muted-foreground) / 0.15) 50%,
    hsl(var(--muted)) 100%
  );
  background-size: 400% 100%;
  animation: skeleton-wave 2s ease-in-out infinite;
}

@keyframes skeleton-wave {
  0% { background-position: 100% 0; }
  100% { background-position: -100% 0; }
}

/* Blur Placeholder - Estado inicial */
.blur-placeholder {
  filter: blur(20px);
  transform: scale(1.1);
  opacity: 1;
  transition: 
    filter 0.4s cubic-bezier(0.4, 0, 0.2, 1),
    transform 0.4s cubic-bezier(0.4, 0, 0.2, 1),
    opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: filter, transform, opacity;
}

/* Blur Placeholder - Estado carregado (oculto) */
.blur-placeholder-hidden {
  filter: blur(0);
  transform: scale(1);
  opacity: 0;
  pointer-events: none;
}

/* Imagem Universal - Estado inicial */
.universal-image {
  opacity: 0;
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Imagem Universal - Estado carregado */
.universal-image-loaded {
  opacity: 1;
}

/* Evitar layout thrashing em grids */
.stable-grid {
  contain: layout;
}